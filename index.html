<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 던전 마스터 - 프롬프트로 전투하라!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-wrapper">
        <!-- 메인 게임 화면 -->
        <div class="game-container">
            <div class="game-header">
                <div class="stat-group">
                    <div class="stat">⚔️ <span id="attack">10</span></div>
                    <div class="stat">🛡️ <span id="defense">5</span></div>
                    <div class="stat">✨ <span id="magic">0</span></div>
                </div>
                <div class="floor-display">
                    <span class="floor-text">FLOOR</span>
                    <span class="floor-number" id="floor">1</span>
                </div>
                <div class="stat-group">
                    <div class="stat">
                        <span class="hp-label">HP</span>
                        <div class="hp-bar">
                            <div class="hp-fill" id="hpBar"></div>
                            <span class="hp-text"><span id="hp">100</span>/<span id="maxHp">100</span></span>
                        </div>
                    </div>
                    <div class="stat">
                        <span class="exp-label">EXP</span>
                        <div class="exp-bar">
                            <div class="exp-fill" id="expBar"></div>
                            <span class="exp-text">Lv.<span id="level">1</span></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="game-board" id="gameBoard">
                <!-- 게임 보드가 여기에 생성됩니다 -->
            </div>
            
            <div class="quick-slots">
                <div class="slot" data-key="1">
                    <span class="slot-key">1</span>
                    <span class="slot-icon">🧪</span>
                    <span class="slot-count" id="potion-count">3</span>
                </div>
                <div class="slot" data-key="2">
                    <span class="slot-key">2</span>
                    <span class="slot-icon">📜</span>
                    <span class="slot-count" id="scroll-count">2</span>
                </div>
                <div class="slot" data-key="3">
                    <span class="slot-key">3</span>
                    <span class="slot-icon">⚡</span>
                    <span class="slot-count" id="thunder-count">1</span>
                </div>
                <div class="slot" data-key="4">
                    <span class="slot-key">4</span>
                    <span class="slot-icon">❄️</span>
                    <span class="slot-count" id="ice-count">1</span>
                </div>
            </div>
        </div>
        
        <!-- 사이드 패널 -->
        <div class="side-panel">
            <div class="message-log" id="messageLog">
                <div class="message welcome">🎮 AI 던전 마스터에 오신 것을 환영합니다!</div>
                <div class="message info">프롬프트의 품질이 마법의 위력을 결정합니다!</div>
            </div>
            
            <!-- 프롬프트 패널 -->
            <div class="prompt-panel" id="promptPanel">
                <div class="prompt-header">
                    <span>🤖 AI 프롬프트 마법</span>
                    <span class="prompt-power">위력: <span id="promptPower">0</span>%</span>
                </div>
                
                <div class="prompt-inputs">
                    <div class="prompt-section">
                        <label>System Prompt (AI의 역할 정의)</label>
                        <textarea id="systemPrompt" placeholder="예: 당신은 고대의 마법사입니다. 강력한 주문을 사용할 수 있습니다."></textarea>
                        <div class="prompt-hint" id="systemHint">💡 구체적이고 명확한 역할을 부여하세요</div>
                    </div>
                    
                    <div class="prompt-section">
                        <label>User Prompt (명령 내리기)</label>
                        <textarea id="userPrompt" placeholder="예: 3단계로 나누어 화염 마법을 시전하고, 각 단계의 효과를 설명하세요."></textarea>
                        <div class="prompt-hint" id="userHint">💡 구체적인 행동과 조건을 명시하세요</div>
                    </div>
                </div>
                
                <div class="prompt-buttons">
                    <button class="btn-cast" onclick="castPromptSpell()">
                        <span class="btn-icon">⚡</span>
                        <span>마법 시전</span>
                    </button>
                    <button class="btn-cancel" onclick="closePrompt()">취소</button>
                </div>
                
                <div class="prompt-tips">
                    <div class="tip-title">🎯 프롬프트 팁</div>
                    <ul>
                        <li>구체적인 숫자와 단계를 명시하면 위력 UP!</li>
                        <li>Chain-of-thought (단계별 사고) 사용시 보너스</li>
                        <li>보스전에서는 특별한 키워드가 필요합니다</li>
                    </ul>
                </div>
            </div>
            
            <!-- 보스 정보 패널 -->
            <div class="boss-panel" id="bossPanel" style="display: none;">
                <div class="boss-header">⚠️ 보스 등장!</div>
                <div class="boss-info">
                    <div class="boss-name" id="bossName">???</div>
                    <div class="boss-hp-bar">
                        <div class="boss-hp-fill" id="bossHpBar"></div>
                    </div>
                    <div class="boss-weakness">
                        약점: <span id="bossWeakness">???</span>
                    </div>
                    <div class="boss-hint" id="bossHint">
                        프롬프트에 특정 키워드를 포함시켜보세요!
                    </div>
                </div>
            </div>
            
            <!-- 도움말 -->
            <div class="help-panel">
                <div class="help-title">📖 조작법</div>
                <div class="controls-grid">
                    <div class="control">⬆⬇⬅➡</div><div>이동</div>
                    <div class="control">SPACE</div><div>공격/대화</div>
                    <div class="control">P</div><div>프롬프트 마법</div>
                    <div class="control">1-4</div><div>아이템 사용</div>
                    <div class="control">ESC</div><div>일시정지</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 보스전 오버레이 -->
    <div class="boss-overlay" id="bossOverlay">
        <div class="boss-intro">
            <div class="boss-title" id="bossTitle">보스 등장!</div>
            <div class="boss-sprite" id="bossSprite">🐉</div>
            <div class="boss-description" id="bossDescription"></div>
            <button class="btn-fight" onclick="startBossFight()">전투 시작!</button>
        </div>
    </div>
    
    <!-- 게임 오버 오버레이 -->
    <div class="game-over-overlay" id="gameOverOverlay">
        <div class="game-over-content">
            <h1>GAME OVER</h1>
            <div class="final-stats">
                <div>최종 층: <span id="finalFloor">1</span>층</div>
                <div>최종 레벨: <span id="finalLevel">1</span></div>
                <div>처치한 몬스터: <span id="finalKills">0</span></div>
                <div>최고 프롬프트 점수: <span id="finalPromptScore">0</span>%</div>
            </div>
            <button class="btn-restart" onclick="location.reload()">다시 시작</button>
        </div>
    </div>
    
    <!-- 레벨업 이펙트 -->
    <div class="levelup-effect" id="levelupEffect">
        LEVEL UP!
    </div>
    
    <script src="game.js"></script>
    <script src="prompt-evaluator.js"></script>
    <script src="boss.js"></script>
</body>
</html>
