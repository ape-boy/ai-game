<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마법소년 김씨의 던전 어드벤처</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-wrapper">
        <!-- 메인 게임 화면 -->
        <div class="game-container">
            <div class="game-header">
                <div class="stat-group">
                    <div class="stat">⚔️ <span id="attack">8</span></div>
                    <div class="stat">🛡️ <span id="defense">3</span></div>
                    <div class="stat">📚 <span id="magic">0</span></div>
                </div>
                <div class="floor-display">
                    <span class="floor-text">FLOOR</span>
                    <span class="floor-number" id="floor">1</span>
                </div>
                <div class="stat-group">
                    <div class="stat">
                        <span class="hp-label">HP</span>
                        <div class="hp-bar">
                            <div class="hp-fill" id="hpBar"></div>
                            <span class="hp-text"><span id="hp">80</span>/<span id="maxHp">80</span></span>
                        </div>
                    </div>
                    <div class="stat">
                        <span class="exp-label">EXP</span>
                        <div class="exp-bar">
                            <div class="exp-fill" id="expBar"></div>
                            <span class="exp-text">Lv.<span id="level">1</span></span>
                        </div>
                    </div>
                    <div class="stat">
                        <span class="mana-label">MP</span>
                        <div class="mana-bar">
                            <div class="mana-fill" id="manaBar"></div>
                            <span class="mana-text"><span id="mana">50</span>/<span id="maxMana">50</span></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="game-board" id="gameBoard">
                <!-- 게임 보드가 여기에 생성됩니다 -->
            </div>
            
            <div class="game-controls">
                <div class="control-guide">
                    <h3>🎮 조작법</h3>
                    <div class="controls-list">
                        <div class="control-item">
                            <span class="key">WASD / ↑↓←→</span>
                            <span class="desc">이동</span>
                        </div>
                        <div class="control-item">
                            <span class="key">T</span>
                            <span class="desc">탐험/전투 모드</span>
                        </div>
                        <div class="control-item">
                            <span class="key">SPACE</span>
                            <span class="desc">선택/행동</span>
                        </div>
                        <div class="control-item">
                            <span class="key">F</span>
                            <span class="desc">보스 필살기</span>
                        </div>
                        <div class="control-item">
                            <span class="key">1,2,3,4</span>
                            <span class="desc">전투 선택</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 사이드 패널 -->
        <div class="side-panel">
            <div class="message-log" id="messageLog">
                <div class="message welcome">🎮 마법소년 김씨의 던전 어드벤처!</div>
                <div class="message info">객관식 전투로 몬스터를 물리치세요!</div>
            </div>
            
            <!-- 객관식 전투 패널 -->
            <div class="battle-panel" id="battlePanel" style="display: none;">
                <div class="battle-header">
                    <span id="battleTitle">⚔️ 전투 선택</span>
                    <span class="battle-timer">⏰ <span id="battleTimer">15</span>초</span>
                </div>
                
                <div class="battle-question" id="battleQuestion">
                    <h3 id="questionText">슬라임의 가장 효과적인 공격 방법은?</h3>
                    <div class="battle-choices">
                        <div class="choice" data-key="1">
                            <span class="choice-key">1</span>
                            <span class="choice-text">강력한 물리 공격</span>
                            <span class="choice-result"></span>
                        </div>
                        <div class="choice" data-key="2">
                            <span class="choice-key">2</span>
                            <span class="choice-text">화염 마법으로 건조</span>
                            <span class="choice-result"></span>
                        </div>
                        <div class="choice" data-key="3">
                            <span class="choice-key">3</span>
                            <span class="choice-text">얼음 마법으로 냉각</span>
                            <span class="choice-result"></span>
                        </div>
                        <div class="choice" data-key="4">
                            <span class="choice-key">4</span>
                            <span class="choice-text">바람 마법으로 밀어내기</span>
                            <span class="choice-result"></span>
                        </div>
                    </div>
                    <div class="battle-hint" id="battleHint">💡 몬스터의 특성을 고려해보세요!</div>
                </div>
            </div>
            
            <!-- 필살기 패널 (보스전 전용) -->
            <div class="ultimate-panel" id="ultimatePanel" style="display: none;">
                <div class="ultimate-header">
                    <span>✨ 최강 마법 주문</span>
                    <span class="ultimate-power">힌트북: <span id="hintBookCount">0</span>권</span>
                </div>
                
                <div class="ultimate-inputs">
                    <div class="ultimate-section">
                        <label>최강 마법 주문 입력</label>
                        <textarea id="ultimatePrompt" rows="4" placeholder="예: 슬라임의 물로 된 체질을 이용해 고온 열에너지로 순간 증발시키고, 마리기 열풍으로 단순지 액체를 박산내내어 완전 분해합니다."></textarea>
                        <div class="ultimate-hint" id="ultimateHint">📚 힌트북을 사용하여 보스의 약점을 분석하세요!</div>
                        <div class="ultimate-score">
                            <span>예상 위력: </span>
                            <span id="ultimateScore">0%</span>
                        </div>
                    </div>
                </div>
                
                <div class="ultimate-buttons">
                    <button class="btn-ultimate" onclick="castUltimateSpell()">
                        <span class="btn-icon">✨</span>
                        <span>최강 마법 발동! (Enter)</span>
                    </button>
                    <button class="btn-cancel" onclick="closeUltimatePanel()">취소 (ESC)</button>
                </div>
                
                <div class="ultimate-tips">
                    <div class="tip-title">💡 최강 마법 팁:</div>
                    <ul>
                        <li>보스의 특성과 약점을 정확히 분석</li>
                        <li>단계별로 나눠 상세한 마법 주문</li>
                        <li>창의적이고 혁신적인 마법 조합</li>
                        <li>속성, 원소, 반응의 완벽한 활용</li>
                        <li>마법 이론에 기반한 논리적 주문</li>
                    </ul>
                </div>
            </div>
            
            <!-- 게임 상태 -->
            <div class="help-panel">
                <div class="help-title">📊 게임 상태</div>
                <div class="game-status">
                    <div class="status-item">
                        <span class="status-label">게임 모드:</span>
                        <span class="status-value" id="gameModeDisplay">탐험</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">선택된 대상:</span>
                        <span class="status-value" id="selectedTarget">없음</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">처치한 몬스터:</span>
                        <span class="status-value" id="killCountDisplay">0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">최고 점수:</span>
                        <span class="status-value" id="maxScoreDisplay">0%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 게임 스크립트 -->
    <script src="game.js"></script>
    <script src="prompt-evaluator.js"></script>
</body>
</html>